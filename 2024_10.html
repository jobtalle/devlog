<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="initial-scale=1"><meta name="description" content="The Koi Farm 2 development blog"><title>Koi Farm 2 blog | October 2024</title><link rel="stylesheet" type="text/css" href="style.css"><link rel="icon" type="image/png" sizes="16x16" href="favicon_16.png"/><link rel="icon" type="image/png" sizes="32x32" href="favicon_32.png"/><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="rss.xml"></head><body><div id="wrapper"><div id="content"><input type="checkbox" id="dropdown-menu" class="dropdown-checkbox"><label for="dropdown-menu" id="menu-toggle"><span></span></label><div id="index" class="dropdown-menu"><ul><li><a title="September" href="2025_09.html">September 2025</a></li><li><a title="Holland Koi Show" href="2025_08.html">August 2025</a></li><li><a title="Shadows" href="2025_07.html">July 2025</a></li><li><a title="Making waves" href="2025_06.html">June 2025</a></li><li><a title="The grid" href="2025_05.html">May 2025</a></li><li><a title="Tessellation" href="2025_04.html">April 2025</a></li><li><a title="Patterns" href="2025_03.html">March 2025</a></li><li><a title="Memory management" href="2025_02.html">February 2025</a></li><li><a title="The koi are back" href="2025_01.html">January 2025</a></li><li><hr></li><li><a title="Porting progress" href="2024_12.html">December 2024</a></li><li><a title="A new engine" href="2024_11.html">November 2024</a></li><li>October 2024</li><li><a title="Koi farms in Japan" href="2024_09.html">September 2024</a></li><li><a title="Water & fin colors" href="2024_08.html">August 2024</a></li><li><a title="Pattern genetics" href="2024_07.html">July 2024</a></li><li><a title="The first patterns" href="2024_06.html">June 2024</a></li><li><a title="Shadows, textures and fins" href="2024_05.html">May 2024</a></li><li><a title="Animation" href="2024_04.html">April 2024</a></li><li><a title="Rigging fins" href="2024_03.html">March 2024</a></li><li><a title="Koi modelling" href="2024_02.html">February 2024</a></li><li><a title="Interactive koi" href="2024_01.html">January 2024</a></li><li><hr></li><li><a title="Moving to 3d" href="2023_12.html">December 2023</a></li><li><a title="Pond digging" href="2023_11.html">November 2023</a></li><hr></ul><a href="rss.xml" title="RSS"><svg height="16px" width="16px" class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.912 24.912"><g><path d="M3.692,17.517C1.656,17.517,0,19.173,0,21.211C0,23.244,1.656,24.9,3.692,24.9s3.694-1.657,3.694-3.689C7.387,19.173,5.729,17.517,3.692,17.517z"/><path d="M0.384,8.142C0.173,8.142,0,8.315,0,8.527v4.688c0,0.211,0.173,0.383,0.384,0.383c6.02,0,10.919,4.898,10.919,10.92c0,0.209,0.171,0.383,0.384,0.383h4.689h0.016c0.215,0,0.387-0.173,0.387-0.383l-0.018-0.121C16.692,15.423,9.37,8.142,0.384,8.142z"/><path d="M24.89,24.397C24.825,10.936,13.854,0.011,0.384,0.011C0.173,0.011,0,0.183,0,0.397v4.824c0,0.212,0.173,0.383,0.384,0.383c10.429,0,18.913,8.486,18.913,18.914c0,0.209,0.172,0.383,0.382,0.383h4.825h0.02c0.21,0,0.388-0.173,0.388-0.383L24.89,24.397z"/></g></svg></a><a href="https://x.com/jobtalle" target="_blank" title="X"><svg height="16px" width="16px" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve"><g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g></svg></a></div><div id="blog"><div id="post"><h2>Leaving the prototype phase</h2><h3>October 2024</h3><p>Up until this point, koi farm 2 has been developed in Javascript using WebGPU. While koi farm 1 was also web based and ran fine on most desktop computer systems, the limits of browser based software are becoming a problem for koi farm 2, which has a much more complex game world.</p><ul><li>Koi farm 2 has many more ponds than its predecessor. Not all ponds will be in view, and a lot of content will have to be simulated in the background. Javascript has come a long way, but it is inherently much slower than computer programs can be, which is effectively limiting the amount of content I can put in the game.</li><li>Web based applications can actually use multithreading, and koi farm 2 makes use of it for procedural content generation, but multithreading capabilities are very limited. Most importantly, both simulating the game and rendering happens on the same thread, and there's no way to escape this limitation. That means I can really only use a single CPU core for all important work, resulting in lag spikes and performance limitations. It also means the game won't hit the target frame rates on monitors with high refresh rates.</li><li>Javascript takes up a lot of memory, and Javascript with multithreading uses even more. Most computers have plenty of memory nowadays, but I'd rather use that for something fun. I've also noticed that many players are playing koi farm 1 while simultaneously using other software, and I think this should remain possible without issues.</li><li>While I love the WebGPU API, it doesn't allow me to access the GPU to its full extent. I can do most things I want to do, but I can't do them very efficiently and there are many modern features I can't use.</li><li>We want to bring this game to more platforms. While Javascript made it super easy to build koi farm 1 for Android and iOS, it won't run on any consoles. Since we're now licensed Nintendo developers, we definitely want to release on their consoles too.</li></ul><p>That's why I've decided to port the Javascript codebase to C++. This addresses all performance and multithreading problems, and it allows me to use a low level graphics API which gives me access to modern GPU features. On top of that, we'll be able to build it natively on all platforms we want to target. It also removes the limitations that are now affecting game design choices, we were about to leave some features out just because of a lack of performance budget.</p><p>Luckily, I'm proficient at writing C++, so I was able to make a good start with porting the game this month. I've set up most of the basics, and pond digging is almost implemented. The most difficult part is porting the graphics engine to a more modern multithreaded system, but since WebGPU was designed to target modern hardware, the differences aren't too big.</p><p>A significant advantage of prototyping with Javascript is that getting stuff to render and creating interfaces is really easy, it's great for trying things out. I think it's been very useful to have all those Javascript prototypes, but I'll now have to move them into C++ to make sure the concepts hold up at scale.</p></div><div id="footer"><span class="previous"><a href="2024_09.html"><< previous</a></span><span id="copyright">Â© Job Talle 2023 - 2025</span><span class="next"><a href="2024_11.html">next >></a></span></div></div></div></div></body></html>