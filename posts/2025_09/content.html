<h2>Grass</h2>
<p>Because I need image assets to render plants, I had to develop a system for storing and loading textures. These will all be loaded at startup while the game is loading other systems, so all textures can just be compiled into a big batch of data that needs to be unpacked and uploaded as soon as possible. This is very similar to what I'm already doing with the shaders, so I've extended the shader archive system to be used for more types of assets, like images. All source files are sorted by name, the names and pointers to the file bytes are stored in a header and the file data is appended after that.</p>
<p>Modern image formats are great. They compress images in optimal ways, and since images are one of the largest file types that are sent around, it helps when they can be compressed even a little bit more. These compressions algorithms are usually better than the <dfn>Zlib</dfn> compression I'm already using for shaders. It turns out:</p>
<ul>
    <li>PNG files are easily 20% smaller than my Zlib compressed files.</li>
    <li>This advantage partially disappears when I compress all my textures in a single blob.</li>
    <li>PNG decompression is slower than Zlib, which increases load times.</li>
    <li>Smaller files load much faster, which partially negates that difference.</li>
</ul>
<p>I settled on compressing textures using only Zlib for now, since it's very fast and the systems are already in place, although I may add one of the PNG pre-processing algorithms later to improve image compression a bit more. These pre-processing algorithms can be very simple, like storing the differences between neighboring pixels instead of the pixel values themselves, which is easy enough to try.</p>
<figure>
    <img src="curvature.webp" alt="Flat planes versus curved planes">
    <figcaption>Flat planes versus curved planes</figcaption>
</figure>
<figure>
    <img src="geometry.webp" alt="Sprites versus geometry">
    <figcaption>Sprites versus geometry</figcaption>
</figure>
<figure>
    <img src="overdraw.webp" alt="Overdraw">
    <figcaption>Overdraw</figcaption>
</figure>