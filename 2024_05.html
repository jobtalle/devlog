<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="initial-scale=1"><meta name="description" content="The Koi Farm 2 development blog"><title>Koi Farm 2 blog | May 2024</title><link rel="stylesheet" type="text/css" href="style.css"><link rel="icon" type="image/png" sizes="16x16" href="favicon_16.png"/><link rel="icon" type="image/png" sizes="32x32" href="favicon_32.png"/><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="rss.xml"></head><body><div id="wrapper"><div id="content"><input type="checkbox" id="dropdown-menu" class="dropdown-checkbox"><label for="dropdown-menu" id="menu-toggle"><span></span></label><div id="index" class="dropdown-menu"><ul><li><a href="2025_08.html">August 2025</a></li><li><a href="2025_07.html">July 2025</a></li><li><a href="2025_06.html">June 2025</a></li><li><a href="2025_05.html">May 2025</a></li><li><a href="2025_04.html">April 2025</a></li><li><a href="2025_03.html">March 2025</a></li><li><a href="2025_02.html">February 2025</a></li><li><a href="2025_01.html">January 2025</a></li><li><hr></li><li><a href="2024_12.html">December 2024</a></li><li><a href="2024_11.html">November 2024</a></li><li><a href="2024_10.html">October 2024</a></li><li><a href="2024_09.html">September 2024</a></li><li><a href="2024_08.html">August 2024</a></li><li><a href="2024_07.html">July 2024</a></li><li><a href="2024_06.html">June 2024</a></li><li>May 2024</li><li><a href="2024_04.html">April 2024</a></li><li><a href="2024_03.html">March 2024</a></li><li><a href="2024_02.html">February 2024</a></li><li><a href="2024_01.html">January 2024</a></li><li><hr></li><li><a href="2023_12.html">December 2023</a></li><li><a href="2023_11.html">November 2023</a></li><hr></ul><a href="rss.xml" title="RSS"><svg height="16px" width="16px" class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.912 24.912"><g><path d="M3.692,17.517C1.656,17.517,0,19.173,0,21.211C0,23.244,1.656,24.9,3.692,24.9s3.694-1.657,3.694-3.689C7.387,19.173,5.729,17.517,3.692,17.517z"/><path d="M0.384,8.142C0.173,8.142,0,8.315,0,8.527v4.688c0,0.211,0.173,0.383,0.384,0.383c6.02,0,10.919,4.898,10.919,10.92c0,0.209,0.171,0.383,0.384,0.383h4.689h0.016c0.215,0,0.387-0.173,0.387-0.383l-0.018-0.121C16.692,15.423,9.37,8.142,0.384,8.142z"/><path d="M24.89,24.397C24.825,10.936,13.854,0.011,0.384,0.011C0.173,0.011,0,0.183,0,0.397v4.824c0,0.212,0.173,0.383,0.384,0.383c10.429,0,18.913,8.486,18.913,18.914c0,0.209,0.172,0.383,0.382,0.383h4.825h0.02c0.21,0,0.388-0.173,0.388-0.383L24.89,24.397z"/></g></svg></a><a href="https://x.com/jobtalle" target="_blank" title="X"><svg height="16px" width="16px" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve"><g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g></svg></a></div><div id="blog"><div id="post"><h2>Shadows, textures and fins</h2><h3>May 2024</h3><p>The koi animations have been improved in some ways. The tail fin is no longer just a flat plane, but it bends as it swings. After studying some koi footage, I found out that the softer middle part of the tail fin slightly lags behind the top and bottom edges of the fin, which I managed to replicate. The pectoral and ventral fins are now animated, but they still seem a bit flat to me; that's something I'll have to address later.</p><figure><img src="posts\2024_05\shadows.jpg" width="500" height="295" alt="Shadows"/><figcaption>Shadows</figcaption></figure><p>While I'm not ready to really start working on fancy graphics, I've added shadows to make the scene more readable. Without shadows, it's impossible to see how high koi swim above the pond floor, so koi now cast shadows on themselves and the pond floor.</p><p>Since I want to render the first procedural patterns next month, I've created a system that allocates GPU memory for pattern info. The current pattern placeholders are currently white dots on a random color.</p><p>I've also added many debug toggles that allow me to test different quality and graphics settings. Most won't make it into the final game since they're just for debugging, but a number of options will be available as graphics settings. Faster computers will be able to render the game at high graphics settings, but these can be changed to make the game run on slow devices too.</p><p>Because GPU memory is limited, I'll have to set a limit on the maximum number of visible koi as well. After some performance tests and calculations, I've settled on a limit of 4096 for now. This should run on all targeted platforms, and it keeps VRAM usage under 2GB, at least on medium and low graphics settings. That should be low enough to make koi farm 2 run on slower devices as well, for example devices that have shared memory hardware.</p></div><div id="footer"><span class="previous"><a href="2024_04.html"><< previous</a></span><span id="copyright">Â© Job Talle 2023 - 2025</span><span class="next"><a href="2024_06.html">next >></a></span></div></div></div></div></body></html>